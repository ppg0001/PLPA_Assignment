---
title: "CodingChallenge6_Loops and iterations"
author: "Pankaj Gaonkar"
date: "2025-03-27"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```




1. 2 pts. Regarding reproducibility, what is the main point of writing your own functions
and iterations?




2. 2 pts. In your own words, describe how to write a function and a for loop in R and how
they work. Give me specifics like syntax, where to write code, and how the results are
returned





```{r}
#load packages

library("dplyr")

```





3. 2 pts. Read in the Cities.csv file from Canvas using a relative file path.

```{r}
#load data

datum <- read.csv("Cities.csv")

head(datum)


```


4. 6 pts. Write a function to calculate the distance between two pairs of coordinates based
on the Haversine formula (see below). The input into the function should be lat1, lon1,
lat2, and lon2. The function should return the object distance_km. All the code below
needs to go into the function.



```{r}

Distance_pair <- function(lat1, lon1, lat2, lon2){      
  # convert to radians
  rad.lat1 <- lat1 * pi/180
  rad.lon1 <- lon1 * pi/180
  rad.lat2 <- lat2 * pi/180
  rad.lon2 <- lon2 * pi/180
  # Haversine formula
  delta_lat <- rad.lat2 - rad.lat1
  delta_lon <- rad.lon2 - rad.lon1
  a <- sin(delta_lat / 2)^2 + cos(rad.lat1) * cos(rad.lat2) * sin(delta_lon / 2)^2
  c <- 2 * asin(sqrt(a))
  # Earth's radius in kilometers
  earth_radius <- 6378137
  # Calculate the distance
  distance_km <- (earth_radius * c)/1000

  return(distance_km)
}

```



5. 5 pts. Using your function, compute the distance between Auburn, AL and New York
City
a. Subset/filter the Cities.csv data to include only the latitude and longitude values
you need and input as input to your function.
b. The output of your function should be 1367.854 km



```{r}
# 5a) Subsetting data to include only new york and auburn


Subset_Auburn_Nyork <- 
  datum %>%
  subset(city_ascii == "Auburn" | city_ascii == "New York")

print(Subset_Auburn_Nyork)

#Running Distance_pain function


Distance_pair(32.6087, -85.4903, 40.6943,	-73.9249)



```

6. 6 pts. Now, use your function within a for loop to calculate the distance between all other
cities in the data

```{r}
#looping

Distance_all_cities.df <- NULL 
for (i in city_ascii){   
  result <- data.frame(Distance_pair(i), i)
  Distance_all_cities.df <- rbind.data.frame(Distance_all_cities.df, result)

}


Distance_all_cities





```


```{r}
```





